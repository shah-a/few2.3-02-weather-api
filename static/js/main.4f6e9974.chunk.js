(this["webpackJsonp2.3-02-weather-api-frontend"]=this["webpackJsonp2.3-02-weather-api-frontend"]||[]).push([[0],{11:function(e,t,n){},14:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),s=n(6),c=n.n(s),i=(n(11),n(2)),o=n.n(i),l=n(3),d=n(4),u=n(0),p=function(e){var t=e.code,n=e.data;return n?Object(u.jsxs)("div",{className:"DataDisplay mb-3",children:[Object(u.jsx)("h1",{className:"text-5xl mb-3 text-gradient-reverse font-bold",children:t.toUpperCase()||"Enter code:"}),Object(u.jsxs)("p",{children:["Temp: ",Object(u.jsx)("strong",{children:n.temp})]}),Object(u.jsxs)("p",{children:["Feels like: ",Object(u.jsx)("strong",{children:n.feelsLike})]}),Object(u.jsxs)("p",{children:["Description: ",Object(u.jsx)("strong",{children:n.description})]})]}):Object(u.jsxs)("div",{className:"DataDisplay mb-3",children:[Object(u.jsx)("h1",{className:"text-5xl mb-3 text-gradient-reverse font-bold",children:t.toUpperCase()||"Enter code:"}),Object(u.jsxs)("p",{children:["Temp: ",Object(u.jsx)("strong",{children:"N/A"})]}),Object(u.jsxs)("p",{children:["Feels like: ",Object(u.jsx)("strong",{children:"N/A"})]}),Object(u.jsxs)("p",{children:["Description: ",Object(u.jsx)("strong",{children:"N/A"})]})]})},j=function(){return Object(u.jsxs)("svg",{className:"inline-block animate-spin mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[Object(u.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",className:"opacity-25"}),Object(u.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})},h=function(e){var t=e.code,n=e.setCode,a=e.loading,r=a?Object(u.jsxs)("button",{disabled:!0,className:"p-2 text-white bg-teal-600 border rounded-r-lg",children:[Object(u.jsx)(j,{}),"Loading"]}):Object(u.jsx)("button",{type:"submit",className:"p-2 text-white bg-teal-500 hover:bg-teal-600 border rounded-r-lg",children:"Get Weather"});return Object(u.jsxs)("div",{className:"CodeInput mb-3",children:[Object(u.jsx)("small",{className:"block mb-2",children:"(For Canadian postal codes, first 3 characters only)"}),Object(u.jsx)("input",{type:"text",placeholder:"ZIP/Postal Code",pattern:"^([A-Za-z]\\d[A-Za-z])|(\\d{5})$",maxLength:"5",className:"p-2 border rounded-l-lg",value:t,disabled:a,onChange:function(e){return n(e.target.value)}}),r]})},b=function(e){var t=e.units,n=e.setUnits;return Object(u.jsxs)("select",{value:t,className:"mb-3 p-2 border rounded-lg mr-auto",onChange:function(e){return n(e.target.value)},children:[Object(u.jsx)("option",{value:"metric",children:"Celsius"}),Object(u.jsx)("option",{value:"imperial",children:"Fahrenheit"}),Object(u.jsx)("option",{value:"standard",children:"Kelvin"})]})},m=function(e){var t=e.label,n=e.name,a=e.checked,r=e.onChange;return Object(u.jsxs)("label",{className:"block mb-1",children:[Object(u.jsx)("input",{type:"radio",className:"mr-1",name:n,checked:a,onChange:r}),t]})},x=function(){var e=Object(l.a)(o.a.mark((function e(t,n,a){var r,s,c,i,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new RegExp(/([a-z]\d[a-z])/i).test(t)?"".concat(t,",ca"):t,"https://api.openweathermap.org/data/2.5/weather",r="?zip=".concat(t,"&units=").concat(n),s="".concat("https://few-weather.herokuapp.com","/weather"),"POST",c={"Content-Type":"application/json"},i=JSON.stringify({urlBase:"https://api.openweathermap.org/data/2.5/weather",urlQuery:r}),e.next=9,fetch(s,{method:"POST",headers:c,body:i});case 9:return l=e.sent,e.next=12,l.json();case 12:"2"!==(l=e.sent).cod.toString()[0]?a(null):a({temp:l.main.temp,feelsLike:l.main.feels_like,description:l.weather[0].description});case 14:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),O=function(){var e=Object(l.a)(o.a.mark((function e(t,n){var a,r,s,c,i,l,d,u,p,j;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Promise((function(e,t){navigator.geolocation.getCurrentPosition(e,t,{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})})),e.next=3,a.catch((function(){return alert("Error! Try checking your location permissions.")}));case 3:if(r=e.sent){e.next=6;break}return e.abrupt("return",n(null));case 6:return s=r.coords,c=s.latitude,i=s.longitude,"https://api.openweathermap.org/data/2.5/weather",l="?lat=".concat(c,"&lon=").concat(i,"&units=").concat(t),d="".concat("https://few-weather.herokuapp.com","/weather"),"POST",u={"Content-Type":"application/json"},p=JSON.stringify({urlBase:"https://api.openweathermap.org/data/2.5/weather",urlQuery:l}),e.next=15,fetch(d,{method:"POST",headers:u,body:p});case 15:return j=e.sent,e.next=18,j.json();case 18:"2"!==(j=e.sent).cod.toString()[0]?n(null):n({temp:j.main.temp,feelsLike:j.main.feels_like,description:j.weather[0].description});case 20:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=Object(a.useState)(""),t=Object(d.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)("metric"),c=Object(d.a)(s,2),i=c[0],f=c[1],g=Object(a.useState)(null),w=Object(d.a)(g,2),v=w[0],y=w[1],N=Object(a.useState)(!1),k=Object(d.a)(N,2),C=k[0],S=k[1],A=Object(a.useState)(!1),T=Object(d.a)(A,2),D=T[0],P=T[1];return Object(u.jsxs)("div",{className:"Weather text-gray-700 sm:text-lg max-w-md mx-auto space-y-4 divide-y-2",children:[Object(u.jsxs)("form",{onSubmit:function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),S(!0),e.next=4,x(n,i,y);case 4:S(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(u.jsx)(p,{code:n,units:i,data:v}),Object(u.jsx)(h,{code:n,setCode:r,loading:C}),Object(u.jsx)(b,{units:i,setUnits:f}),["metric","imperial","standard"].map((function(e){return Object(u.jsx)(m,{name:"units",checked:i===e,onChange:function(){return f(e)},label:"".concat(e[0].toUpperCase()).concat(e.slice(1))},"key-".concat(e))}))]}),Object(u.jsx)("form",{className:"flex flex-col items-center",onSubmit:function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),P(!0),e.next=4,O(i,y);case 4:P(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:D?Object(u.jsxs)("button",{disabled:!0,className:"mt-4 p-2 text-white bg-teal-600 border rounded-lg",children:[Object(u.jsx)(j,{}),"Loading"]}):Object(u.jsx)("button",{type:"submit",className:"mt-4 p-2 text-white bg-teal-500 hover:bg-teal-600 border rounded-lg",children:"Use Current Location"})})]})},g=function(){return Object(u.jsx)("footer",{className:"Footer mt-auto bg-gradient-reverse",children:Object(u.jsx)("a",{href:"https://github.com/shah-a/few2.3-02-weather-api",target:"_blank",rel:"noreferrer",children:Object(u.jsx)("i",{className:"fab fa-github-alt fa-3x p-10 text-teal-900 hover:text-teal-700"})})})},w=function(){return Object(u.jsxs)("div",{className:"App min-h-screen flex flex-col bg-gray-100",children:[Object(u.jsx)("div",{className:"my-auto sm:mx-auto",children:Object(u.jsxs)("div",{className:"relative py-3 sm:max-w-xl sm:mx-auto",children:[Object(u.jsx)("div",{className:"absolute inset-x-0 inset-y-10 sm:inset-10 bg-gradient shadow-lg transform -skew-y-6 sm:skew-y-0 sm:-rotate-6 sm:rounded-3xl"}),Object(u.jsx)("div",{className:"relative px-4 py-10 bg-white shadow-lg sm:rounded-3xl sm:p-20 my-10 sm:m-10",children:Object(u.jsx)(f,{})})]})}),Object(u.jsx)(g,{})]})};c.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(w,{})}),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.4f6e9974.chunk.js.map